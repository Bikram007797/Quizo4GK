"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{449:(e,t,s)=>{s.d(t,{ThemeToggle:()=>c});var a=s(5155),o=s(5989),r=s(2784),n=s(8861),i=s(1295),l=s(6259),d=s(8320);function c(){let{setTheme:e}=(0,d.U)();return(0,a.jsxs)(l.rI,{children:[(0,a.jsx)(l.ty,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(o.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(r.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(l.SQ,{align:"end",children:[(0,a.jsxs)(l._2,{onClick:()=>e("light"),children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Light"]}),(0,a.jsxs)(l._2,{onClick:()=>e("dark"),children:[(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Dark"]}),(0,a.jsxs)(l._2,{onClick:()=>e("system"),children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"System"]})]})]})}},1295:(e,t,s)=>{s.d(t,{$:()=>u});var a=s(5155),o=s(2115),r=s(7129),n=s(3101);let i=null,l=!1;var d=s(4269);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:s,variant:o,size:n,asChild:u=!1,playSound:m=!0,onClick:p,...f}=e,h=u?r.DX:"button";return(0,a.jsx)(h,{className:(0,d.cn)(c({variant:o,size:n,className:s})),ref:t,onClick:e=>{m&&function(){if(l||function(){if(!l)try{i=new(window.AudioContext||window.webkitAudioContext),l=!0}catch(e){console.error("Web Audio API is not supported in this browser.",e),l=!1}}(),i&&"suspended"!==i.state||null==i||i.resume(),i)try{let e=i.createOscillator(),t=i.createGain();e.type="sine",e.frequency.setValueAtTime(200,i.currentTime),t.gain.setValueAtTime(.5,i.currentTime),e.frequency.exponentialRampToValueAtTime(100,i.currentTime+.1),t.gain.exponentialRampToValueAtTime(.001,i.currentTime+.1),e.connect(t),t.connect(i.destination),e.start(i.currentTime),e.stop(i.currentTime+.1)}catch(e){console.error("Could not play sound",e)}}(),p&&p(e)},...f})});u.displayName="Button"},6259:(e,t,s)=>{s.d(t,{SQ:()=>m,_2:()=>p,lp:()=>f,mB:()=>h,rI:()=>c,ty:()=>u});var a=s(5155),o=s(2115),r=s(5138),n=s(3263),i=s(2251),l=s(5797),d=s(4269);let c=r.bL,u=r.l9;r.YJ,r.ZL,r.Pb,r.z6,o.forwardRef((e,t)=>{let{className:s,inset:o,children:i,...l}=e;return(0,a.jsxs)(r.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",s),...l,children:[i,(0,a.jsx)(n.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,o.forwardRef((e,t)=>{let{className:s,...o}=e;return(0,a.jsx)(r.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})}).displayName=r.G5.displayName;let m=o.forwardRef((e,t)=>{let{className:s,sideOffset:o=4,...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:t,sideOffset:o,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});m.displayName=r.UC.displayName;let p=o.forwardRef((e,t)=>{let{className:s,inset:o,...n}=e;return(0,a.jsx)(r.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",s),...n})});p.displayName=r.q7.displayName,o.forwardRef((e,t)=>{let{className:s,children:o,checked:n,...l}=e;return(0,a.jsxs)(r.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),o]})}).displayName=r.H_.displayName,o.forwardRef((e,t)=>{let{className:s,children:o,...n}=e;return(0,a.jsxs)(r.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"h-2 w-2 fill-current"})})}),o]})}).displayName=r.hN.displayName;let f=o.forwardRef((e,t)=>{let{className:s,inset:o,...n}=e;return(0,a.jsx)(r.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",s),...n})});f.displayName=r.JU.displayName;let h=o.forwardRef((e,t)=>{let{className:s,...o}=e;return(0,a.jsx)(r.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...o})});h.displayName=r.wv.displayName},8320:(e,t,s)=>{s.d(t,{AppProvider:()=>c,U:()=>u});var a=s(5155),o=s(2115),r=s(6549),n=s(5894),i=s(1312),l=s(9708);let d=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,o.useState)(r.OS),[u,m]=(0,o.useState)("system"),[p,f]=(0,o.useState)(!0),{toast:h}=(0,n.dj)();(0,i.useAuth)();let x=(0,i.useFirestore)(),{user:g,isUserLoading:v}=(0,i.useUser)();(0,o.useEffect)(()=>{try{let e=localStorage.getItem("quizo_theme");e&&m(e)}catch(e){console.warn("Could not load theme from localStorage",e)}},[]),(0,o.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark");let t=u;"system"===u&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),e.classList.add(t);try{localStorage.setItem("quizo_theme",u)}catch(e){console.warn("Could not save theme to localStorage",e)}},[u]),(0,o.useEffect)(()=>{if(v)return void f(!0);if(g){let e=(0,l.H9)(x,"users",g.uid),t=(0,l.aQ)(e,e=>{e.exists()?c(e.data()):c({...r.OS,id:g.uid,username:g.displayName||"New User",email:g.email||""}),f(!1)},e=>{console.error("Error listening to user document:",e),f(!1)});return()=>t()}c(r.OS),f(!1)},[g,v,x]);let b=(0,o.useCallback)(e=>{if(!g)return void c(t=>{let s={...t.stats,xp:(t.stats.xp||0)+(e.xp||0),points:(t.stats.points||0)+(e.points||0),coins:(t.stats.coins||0)+(e.coins||0),dailyPoints:(t.stats.dailyPoints||0)+(e.points||0),weeklyPoints:(t.stats.weeklyPoints||0)+(e.points||0),monthlyPoints:(t.stats.monthlyPoints||0)+(e.points||0)},a=t.stats.level||1,o=r.wQ.filter(e=>s.xp>=e).length||1;return s.level=Math.max(a,o),{...t,stats:s}});let t=(0,l.H9)(x,"users",g.uid);(0,l.x7)(t).then(s=>{if(s.exists()){let a=s.data().stats,o=e.points||0,n={xp:(a.xp||0)+(e.xp||0),points:(a.points||0)+o,coins:(a.coins||0)+(e.coins||0),dailyPoints:(a.dailyPoints||0)+o,weeklyPoints:(a.weeklyPoints||0)+o,monthlyPoints:(a.monthlyPoints||0)+o},i=r.wQ.filter(e=>n.xp>=e).length||1;i>a.level&&(n.level=i,h({title:"Level Up!",description:"Congratulations! You've reached Level ".concat(i,".")})),(0,l.mZ)(t,{stats:{...a,...n}})}})},[g,x,h]),y=(0,o.useCallback)(e=>{if(!g)return void c(t=>{let s=t.attempts[e.quizSetId]||[];return{...t,attempts:{...t.attempts,[e.quizSetId]:[...s,e]}}});let t=(0,l.H9)(x,"users",g.uid);(0,l.x7)(t).then(s=>{if(s.exists()){let a=(s.data().attempts||{})[e.quizSetId]||[];(0,l.mZ)(t,{["attempts.".concat(e.quizSetId)]:[...a,e]})}})},[g,x]),k=(0,o.useCallback)(e=>{if(g){let t=(0,l.H9)(x,"users",g.uid);(0,l.x7)(t).then(s=>{if(s.exists()){let a=s.data().bookmarks||[],o=a.includes(e)?a.filter(t=>t!==e):[...a,e];(0,l.mZ)(t,{bookmarks:o})}})}else c(t=>{let s=t.bookmarks.includes(e)?t.bookmarks.filter(t=>t!==e):[...t.bookmarks,e];return{...t,bookmarks:s}});setTimeout(()=>{h({title:s.bookmarks.includes(e)?"Bookmark Removed":"Bookmarked!",description:s.bookmarks.includes(e)?"The question has been removed from your bookmarks.":"You can find this question in your bookmarks to review later."})},0)},[g,x,h,s.bookmarks]),w=(0,o.useCallback)(e=>s.bookmarks.includes(e),[s.bookmarks]),N=(0,o.useCallback)(e=>{if(!s.completedSets.includes(e))if(g){let t=(0,l.H9)(x,"users",g.uid);(0,l.x7)(t).then(s=>{if(s.exists()){let a=s.data().completedSets||[];a.includes(e)||(0,l.mZ)(t,{completedSets:[...a,e]})}})}else c(t=>({...t,completedSets:[...t.completedSets,e]}))},[g,x,s.completedSets]),j=(0,o.useCallback)(e=>{let t=s.attempts[e];return t&&0!==t.length?Math.max(...t.map(e=>e.score)):null},[s.attempts]),C=(0,o.useCallback)(e=>{var t;return(null==(t=s.attempts[e])?void 0:t.length)||0},[s.attempts]),S=(0,o.useCallback)(e=>{let t=s.attempts[e];return t&&0!==t.length?t.sort((e,t)=>t.timestamp-e.timestamp)[0]:null},[s.attempts]);return(0,a.jsx)(d.Provider,{value:{userData:s,theme:u,setTheme:e=>{m(e)},updateStats:b,addAttempt:y,toggleBookmark:k,isBookmarked:w,markSetAsCompleted:N,getBestScore:j,getAttemptsCount:C,getLastAttempt:S,isLoading:p||v},children:t})}function u(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e}}}]);